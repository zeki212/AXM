webpackJsonp([34],{Mn7Z:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});s("WJbf");var i=s("OhwO"),o=(s("eqfM"),s("/QYm")),a=(s("IoXr"),{data:function(){return{phone:"",dearphone:"",value:"",show:!1,user:JSON.parse(localStorage.getItem("user")),errorInfo:"",showKeyboard:!0,statesw:"1",userInfo:JSON.parse(localStorage.getItem("userInfo")),version:this.$information.VERSION,source:this.$information.source,pageNo:1,pageSize:10,type:1,list:"",active:0,isLoad:!1,loading:!1,finished:!0,files:"",popupText:!1,popupUser:!1,compText:!1,equipId:"",payPwd:"",userId:"",users:"",complaintDetail:""}},watch:{$route:function(e,t){-1==e.fullPath.indexOf("?")&&(this.popupText=!1,this.popupUser=!1,this.compText=!1)},active:function(e){this.pageNo=1,this.finished=!0,0==e&&(this.type=1),1==e&&(this.type=2),this.getTradeOrderList()}},created:function(){-1!=this.$route.fullPath.indexOf("?")&&this.goBack()},mounted:function(){this.getCustInfo()},methods:{close:function(){this.show=!1},onInput:function(e){var t=this;if(this.value=(this.value+e).slice(0,6),6===this.value.length){var s={toAccount:this.phone,num:this.user.activeFee,payPwd:this.value},i=encodeParams(s,this.userInfo.userId,this.userInfo.tokenId,this.userInfo.appKey);this.$ajax(this.$api.activeTransfer,{toAccount:this.phone,num:this.user.activeFee,payPwd:this.value},i.sign).then(function(e){200==e.code?(Object(o.a)({message:e.msg,position:"center",duration:"1000"}),t.show=!1,t.phone="",t.value=""):(t.show=!1,t.value="",Object(o.a)({message:e.msg,position:"center",duration:"1000"}))})}else this.errorInfo=""},onDelete:function(){this.value=this.value.slice(0,this.value.length-1)},getType:function(){this.$validator.isPhone(this.phone)?this.show=!0:Object(o.a)({message:"请正确填写对方手机号！",position:"center",duration:"1000"})},showTradingImg:function(e){var t=[];t.push(e),Object(i.a)(t)},confirmPay:function(e){var t=this;if(e.imageUrl){var s={voucherUrl:e.imageUrl,orderId:e.orderId},i=encodeParams(s,this.userInfo.userId,this.userInfo.tokenId,this.userInfo.appKey);this.$ajax(this.$api.confirmPay,{voucherUrl:e.imageUrl,orderId:e.orderId},i.sign).then(function(e){200==e.code?(t.getTradeOrderList(),Object(o.a)({message:e.msg,position:"center",duration:"1000"})):Object(o.a)({message:e.msg,position:"center",duration:"1000"})})}else Object(o.a)({message:"请先上传图片!",position:"center",duration:"1000"})},confirmRecive:function(){var e=this;if(this.payPwd){var t={paypwd:this.payPwd,orderId:this.equipId},s=encodeParams(t,this.userInfo.userId,this.userInfo.tokenId,this.userInfo.appKey);this.$ajax(this.$api.confirmRecive,{paypwd:this.payPwd,orderId:this.equipId},s.sign).then(function(t){200==t.code?(Object(o.a)({message:t.msg,position:"center",duration:"1000"}),e.payPwd="",e.getTradeOrderList(),e.goBack()):Object(o.a)({message:t.msg,position:"center",duration:"1000"})})}else Object(o.a)({message:"请输入交易密码!",position:"center",duration:"1000"})},comp:function(e){-1==window.location.href.indexOf("?compText")&&(window.location.href=window.location.href+"?compText"),this.equipId=e,this.compText=!0},rent:function(e){-1==window.location.href.indexOf("?popupText")&&(window.location.href=window.location.href+"?popupText"),this.equipId=e,this.popupText=!0},popUser:function(e){-1==window.location.href.indexOf("?popupUser")&&(window.location.href=window.location.href+"?popupUser"),this.userId=e,this.popupUser=!0,this.getOtherUserInfo()},getOtherUserInfo:function(){var e=this,t={orderId:this.userId},s=encodeParams(t,this.userInfo.userId,this.userInfo.tokenId,this.userInfo.appKey);this.$ajax(this.$api.getOtherUserInfo,{orderId:this.userId},s.sign).then(function(t){200==t.code?e.users=t.data:Object(o.a)({message:t.msg,position:"center",duration:"1000"})})},getCustInfo:function(){var e=this,t=encodeParams({},this.userInfo.userId,this.userInfo.tokenId,this.userInfo.appKey);this.$ajax(this.$api.getCustInfo,{},t.sign).then(function(t){200==t.code?e.user=t.data:Object(o.a)({message:t.msg,position:"center",duration:"1000"})})},orderCanael:function(e){var t=this,s={version:this.version,orderId:e},i=encodeParams(s,this.userInfo.userId,this.userInfo.tokenId,this.userInfo.appKey);this.$ajax(this.$api.cancelOrder,{version:this.version,orderId:e},i.sign).then(function(e){200==e.code?(t.getTradeOrderList(),Object(o.a)({message:e.msg,position:"center",duration:"1000"})):Object(o.a)({message:e.msg,position:"center",duration:"1000"})})},getTradeOrderList:function(){var e=this,t={version:this.version,pageNo:this.pageNo=1,pageSize:this.pageSize,type:this.type},s=encodeParams(t,this.userInfo.userId,this.userInfo.tokenId,this.userInfo.appKey);this.isLoad=!1,this.$ajax(this.$api.getTradeOrderList,{version:this.version,pageNo:t.pageNo,pageSize:this.pageSize,type:this.type},s.sign).then(function(t){e.loading=!1,e.isLoad=!0,200==t.code?t.data&&(e.list=t.data.list.filter(function(e){return e.imageUrl="",e}),e.finished=t.data.totalCount/t.data.pageSize<e.pageNo):Object(o.a)({message:t.msg,position:"center",duration:"1000"})})},loadMore:function(){var e=this,t={version:this.version,pageNo:this.pageNo+=1,pageSize:this.pageSize,type:this.type},s=encodeParams(t,this.userInfo.userId,this.userInfo.tokenId,this.userInfo.appKey);this.isLoad=!1,this.$ajax(this.$api.getTradeOrderList,{version:this.version,pageNo:t.pageNo,pageSize:this.pageSize,type:this.type},s.sign).then(function(t){e.loading=!1,200==t.code?t.data&&t.data.list.length>0?(e.list=e.list.concat(t.data.list),e.finished=t.data.totalCount/t.data.pageSize<e.pageNo):e.finished=!0:Object(o.a)({message:t.msg,position:"center",duration:"1000"})})}}}),n={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"mine_box"},[i("my-header",{staticClass:"headerS",attrs:{showBack:!0,title:"激活矿工"}}),e._v(" "),i("ol",{staticClass:"account_box"},[i("p",[e._v("请输入帐号")]),e._v(" "),i("li",{staticClass:"van-hairline--bottom",staticStyle:{"margin-bottom":"5.8vh"}},[i("p",[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.phone,expression:"phone",modifiers:{trim:!0}}],attrs:{type:"text",maxlength:"11",placeholder:"在这里输入手机号"},domProps:{value:e.phone},on:{input:function(t){t.target.composing||(e.phone=t.target.value.trim())},blur:function(t){e.$forceUpdate()}}})])]),e._v(" "),i("p",[e._v("激活所需")]),e._v(" "),i("li",{staticClass:"van-hairline--bottom"},[i("p",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.user.activeFee,expression:"user.activeFee"}],attrs:{type:"number",disabled:""},domProps:{value:e.user.activeFee},on:{input:function(t){t.target.composing||e.$set(e.user,"activeFee",t.target.value)}}}),e._v(" "),i("span",[e._v("AXM")])]),e._v(" "),i("p",{staticClass:"posibottom"},[e._v("可用AXM: "+e._s(e.user.sweets))])]),e._v(" "),i("button",{on:{click:e.getType}},[e._v("确定激活")])]),e._v(" "),i("van-popup",{style:{height:"60%"},attrs:{position:"bottom"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("div",{staticClass:"head"},[i("div",{on:{click:e.close}}),e._v(" "),i("img",{attrs:{src:s("TZvp"),alt:""}}),e._v(" "),i("span",[e._v("资金密码")])]),e._v(" "),i("p",{staticClass:"pass"},[e._v("请输入6位数的资金密码")]),e._v(" "),i("van-password-input",{attrs:{value:e.value,"error-info":e.errorInfo,info:"",focused:e.showKeyboard},on:{focus:function(t){e.showKeyboard=!0}}}),e._v(" "),i("p",{staticClass:"del"},[i("span",[e._v("扣除金额:  "+e._s(e.user.activeFee)+"  AXM")])]),e._v(" "),i("van-number-keyboard",{attrs:{show:e.showKeyboard},on:{input:e.onInput,delete:e.onDelete,blur:function(t){e.showKeyboard=!0}}})],1)],1)},staticRenderFns:[]};var r=s("VU/8")(a,n,!1,function(e){s("q0Zc")},"data-v-40df1666",null);t.default=r.exports},q0Zc:function(e,t){}});