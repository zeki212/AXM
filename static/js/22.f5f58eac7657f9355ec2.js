webpackJsonp([22],{YpU1:function(e,t){},pxV3:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});s("eqfM");var o=s("/QYm"),n={name:"modifyPwd",data:function(){return{phone:JSON.parse(localStorage.getItem("userInfo")).mobile,userInfo:JSON.parse(localStorage.getItem("userInfo")),source:this.$information.source,code:"",newPwd:"",newPwdTwo:"",oldPwd:"",title:"",oldPwdPlaceholder:"",newPwdPlaceholder:"",confirmPassword:"",smsType:3,canChange:!0,isSendMsg:!1,time:60}},mounted:function(){var e=this.$route.params.type;this.showModifyPassword(e)},methods:{showModifyPassword:function(e){1==e?(this.smsType=3,this.title="修改登录密码",this.oldPwdPlaceholder="原登录密码"):(this.smsType=4,this.title="修改资金密码")},getSmsCode:function(){var e=this;this.$ajax(this.$api.sms,{mobile:this.phone,msgType:"3"},{}).then(function(t){if(200==t.code){e.isSendMsg=!0,Object(o.a)({message:t.msg,position:"center",duration:"1000"});var s=e,n=window.setInterval(function(){s.time--<=0&&(s.time=60,s.isSendMsg=!1,window.clearInterval(n))},1e3)}else Object(o.a)({message:t.msg,position:"center",duration:"1000"})})},validatePwd:function(e){return!!/^[0-9]{6}$/.test(e)},validateLoginPwd:function(e){return e.length>=6&&e.length<=12},modify:function(){var e=this;if(3==this.smsType){if(!this.validateLoginPwd(this.newPwd))return void Object(o.a)({message:"密码为6-12位且至少包括大小写字母、符号和数字的两种组合!",position:"center",duration:"1000"});if(this.confirmPassword!=this.newPwd)return void Object(o.a)({message:"两次密码不一致",position:"center",duration:"1000"})}else{if(!this.code)return void Object(o.a)({message:"请输入您的验证码!",position:"center",duration:"1000"});if(!this.validatePwd(this.newPwdTwo))return void Object(o.a)({message:"交易密码格式不正确!",position:"center",duration:"1000"});if(this.confirmPassword!=this.newPwdTwo)return void Object(o.a)({message:"两次密码不一致!",position:"center",duration:"1000"})}if("3"==this.smsType){var t={account:this.phone,oldPwd:this.oldPwd,password:this.newPwd},s=encodeParams(t,this.userInfo.userId,this.userInfo.tokenId,this.userInfo.appKey);this.$ajax(this.$api.updateLoginPwd,{account:this.phone,oldPwd:this.oldPwd,password:this.newPwd},s.sign).then(function(t){200==t.code?(e.$router.replace("/login"),Object(o.a)({message:t.msg,position:"center",duration:"1000"})):Object(o.a)({message:t.msg,position:"center",duration:"1000"})})}else{var n={account:this.phone,paypwd:this.newPwdTwo,msgVerCode:this.code};s=encodeParams(n,this.userInfo.userId,this.userInfo.tokenId,this.userInfo.appKey);this.$ajax(this.$api.updatePayPwd,{account:this.phone,paypwd:this.newPwdTwo,msgVerCode:this.code},s.sign).then(function(t){200==t.code?(Object(o.a)({message:t.msg,position:"center",duration:"1000"}),e.goBack()):Object(o.a)({message:t.msg,position:"center",duration:"1000"})})}}}},i={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"modify_password"},[s("my-header",{attrs:{showBack:!0,title:e.title}}),e._v(" "),s("div",{staticClass:"modPwd"},[s("div",[s("van-cell-group",[s("van-field",{attrs:{label:"手机号",placeholder:"手机号",readonly:"readonly"},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}}),e._v(" "),4===e.smsType?s("van-field",{attrs:{type:"number",label:"手机验证码",placeholder:"请输入手机验证码"},on:{"click-icon":function(t){e.code=""}},model:{value:e.code,callback:function(t){e.code="string"==typeof t?t.trim():t},expression:"code"}},[s("van-button",{directives:[{name:"show",rawName:"v-show",value:!e.isSendMsg,expression:"!isSendMsg"}],attrs:{slot:"button",size:"small",type:"primary"},on:{click:function(t){e.getSmsCode()}},slot:"button"},[e._v("获取验证码")]),e._v(" "),s("van-button",{directives:[{name:"show",rawName:"v-show",value:e.isSendMsg,expression:"isSendMsg"}],attrs:{slot:"button",size:"small",type:"primary"},slot:"button"},[e._v(e._s(e.time)+"s")])],1):e._e(),e._v(" "),3===e.smsType?s("van-field",{attrs:{type:"password",label:"原密码",placeholder:this.oldPwdPlaceholder},on:{"click-icon":function(t){e.oldPwd=""}},model:{value:e.oldPwd,callback:function(t){e.oldPwd="string"==typeof t?t.trim():t},expression:"oldPwd"}}):e._e(),e._v(" "),3===e.smsType?s("van-field",{attrs:{type:"password",label:"新密码",placeholder:"请输入新的密码"},on:{"click-icon":function(t){e.newPwd=""}},model:{value:e.newPwd,callback:function(t){e.newPwd="string"==typeof t?t.trim():t},expression:"newPwd"}}):e._e(),e._v(" "),4===e.smsType?s("van-field",{attrs:{type:"password",label:"新密码",placeholder:"请输入新的交易密码"},on:{"click-icon":function(t){e.newPwdTwo=""}},model:{value:e.newPwdTwo,callback:function(t){e.newPwdTwo="string"==typeof t?t.trim():t},expression:"newPwdTwo"}}):e._e(),e._v(" "),s("van-field",{attrs:{type:"password",label:"确认密码",placeholder:"再次确认新密码"},on:{"click-icon":function(t){e.confirmPassword=""}},model:{value:e.confirmPassword,callback:function(t){e.confirmPassword="string"==typeof t?t.trim():t},expression:"confirmPassword"}})],1)],1),e._v(" "),s("div",{staticClass:"botmS"},[s("van-button",{attrs:{type:"primary",size:"large"},on:{click:e.modify}},[e._v("确认修改")])],1)])],1)},staticRenderFns:[]};var a=s("VU/8")(n,i,!1,function(e){s("YpU1")},"data-v-cf8fb5b2",null);t.default=a.exports}});